---
inclusion: always
---

# Workflow Conventions: VibeSprint

## Label Taxonomy

### Type Labels
- `plan` - Trigger plan workflow (break down into sub-issues)
- (no label) - Default implement workflow

### State Labels
- `running` - Currently being processed
- `plan-posted` - Plan generated, sub-issues created
- `pr-opened` - PR created successfully
- `retry` - Failed once, will retry on next poll
- `failed` - Failed twice, needs manual intervention

## Columns (GitHub Project Board)

| Column | Purpose |
|--------|---------|
| Backlog | Sub-issues placed here (not monitored) |
| Ready | Monitored column - issues here get processed |
| In Progress | Parent issues after plan workflow completes |
| In Review | Issues after PR is opened |

## State Machine

### Implement Flow
```
Issue in Ready
  → [running] label added
  → kiro-cli executes
  → PR created
  → [running] removed, [pr-opened] added
  → Issue moved to In Review
```

### Plan Flow
```
Issue with [plan] label in Ready
  → [running] label added
  → kiro-cli generates plan
  → Plan posted as comment
  → Sub-issues created in Backlog (linked to parent)
  → [running] removed, [plan-posted] added
  → Parent moved to In Progress
```

### Failure Flow
```
First failure:
  → [running] removed
  → [retry] added
  → Error comment posted
  → Issue stays in Ready (will retry on next poll)

Second failure (retry):
  → [running] removed
  → [failed] added
  → Error comment posted
  → Needs manual intervention
```

## Branch Naming
`agent/<issue-number>-<slug>`

Example: `agent/42-add-user-auth`

## Commit Message Format
```
<type>: <description>

Refs #<issue-number>
```

## PR Body Template
```markdown
## Summary
<auto-generated from kiro-cli output>

Fixes #<issue-number>
```

## Sub-Issue Format
```markdown
<task description>

---
*Part of #<parent-issue-number>*
```
